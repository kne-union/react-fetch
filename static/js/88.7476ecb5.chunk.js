"use strict";(self.webpackChunk_kne_components_react_fetch=self.webpackChunk_kne_components_react_fetch||[]).push([[88],{56088:(t,n,e)=>{e.d(n,{c:()=>o});var a=e(15648),d=e(96164),r=e(96312);const o={name:"react-fetch",summary:'<ul>\n<li>\n<p>\u8be5\u7ec4\u4ef6\u5904\u7406\u4e86\u6570\u636e\u8bf7\u6c42\u7684\u903b\u8f91\uff0c\u5728\u6570\u636e\u8bf7\u6c42\u8fd4\u56de\u4e4b\u524d\u4f1a\u6e32\u67d3\u4e00\u4e2aloading\u7ec4\u4ef6\uff0c\u5728\u8bf7\u6c42\u6570\u636e\u8fd4\u56de\u4e4b\u540e\u6e32\u67d3\u4e1a\u52a1\u7ec4\u4ef6</p>\n</li>\n<li>\n<p>\u5728url\uff0cdata\uff0coptions\u5176\u4e2d\u4e4b\u4e00\u53d1\u751f\u6539\u53d8\u7684\u65f6\u5019\uff0c\u7ec4\u4ef6\u4f1a\u81ea\u52a8\u53d1\u51fa\u4e00\u4e2a\u65b0\u7684\u8bf7\u6c42\u53bb\u8bf7\u6c42\u6570\u636e</p>\n</li>\n<li>\n<p>\u5e95\u5c42\u91c7\u7528 <a href="https://github.com/axios/axios">axios</a> \u6613\u4e8e\u6269\u5c55</p>\n</li>\n<li>\n<p>\u63d2\u4ef6\u5f0f\u8bbe\u8ba1\uff0c\u65b9\u4fbf\u8ffd\u8e2a\u6bcf\u4e00\u6b65\u7684\u8c03\u7528\u5806\u6808\u4fe1\u606f\uff0c\u6613\u4e8e\u6269\u5c55</p>\n</li>\n<li>\n<p>\u7528preset\u9884\u5236\u8bbe\u7f6e\uff0c\u5168\u5c40\u751f\u6548\uff0c\u4e0d\u7528\u5728\u6bcf\u6b21\u8c03\u7528\u90fd\u8bbe\u7f6e\u4e00\u4e9b\u901a\u7528\u5c5e\u6027</p>\n</li>\n</ul>',description:"\u7528\u4e8e\u83b7\u53d6\u6570\u636e\u7684react\u7ec4\u4ef6",packageName:"@kne/react-fetch",api:'<h4>Fetch</h4>\n<table>\n<thead>\n<tr>\n<th>\u5c5e\u6027\u540d</th>\n<th>\u8bf4\u660e</th>\n<th>\u7c7b\u578b</th>\n<th>\u9ed8\u8ba4\u503c</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>url</td>\n<td>\u9700\u8981\u8bf7\u6c42\u63a5\u53e3\u7684url</td>\n<td>string</td>\n<td>-</td>\n</tr>\n<tr>\n<td>data</td>\n<td>POST\u8bf7\u6c42\u7684data</td>\n<td>object</td>\n<td>-</td>\n</tr>\n<tr>\n<td>params</td>\n<td>GET\u8bf7\u6c42\u7684query</td>\n<td>object</td>\n<td>-</td>\n</tr>\n<tr>\n<td>options</td>\n<td>\u8bf7\u6c42\u7684\u5176\u4ed6\u53c2\u6570\uff0c\u5982method,headers\u7b49\uff0c\u8be6\u7ec6\u8bf7\u53c2\u8003<a href="https://github.com/axios/axios">axios</a></td>\n<td>-</td>\n<td></td>\n</tr>\n<tr>\n<td>loading</td>\n<td>\u5728\u8bf7\u6c42\u53d1\u51fa\u540e\u6ca1\u6709\u8fd4\u56de\u7ed3\u679c\u65f6\u6e32\u67d3\u7684\u7ec4\u4ef6</td>\n<td>jsx</td>\n<td>null</td>\n</tr>\n<tr>\n<td>error</td>\n<td>\u8bf7\u6c42\u8fd4\u56de\u540ecode\u4e0d\u4e3a200\u65f6\u6e32\u67d3\u7684\u7ec4\u4ef6\uff0c\u5982\u679c\u4f20\u5165\u51fd\u6570\uff0c\u53c2\u6570\u4e2d\u4f1a\u63a5\u6536\u5230\u8bf7\u6c42\u8fd4\u56de\u7684\u9519\u8befmsg</td>\n<td>jsx|function</td>\n<td>null</td>\n</tr>\n<tr>\n<td>empty</td>\n<td>\u8bf7\u6c42\u672a\u53d1\u51fa\u65f6\u6e32\u67d3\u7684\u7ec4\u4ef6</td>\n<td>jsx</td>\n<td>null</td>\n</tr>\n<tr>\n<td>isEmpty</td>\n<td>\u5224\u65ad\u54cd\u5e94\u6570\u636e\u662f\u5426\u662f\u7a7a\u72b6\u6001</td>\n<td>boolean</td>\n<td>-</td>\n</tr>\n<tr>\n<td>auto</td>\n<td>\u662f\u5426\u81ea\u52a8\u53d1\u9001\u8bf7\u6c42\uff0c\u5982\u679c\u4e3afalse\u9700\u8981\u624b\u52a8\u8c03\u7528refresh\u65b9\u6cd5\u624d\u4f1a\u53d1\u9001\u8bf7\u6c42\uff0c\u5e76\u4e14url,data,options\u53d1\u751f\u53d8\u5316\u540e\u4e0d\u4f1a\u81ea\u52a8\u53d1\u9001\u65b0\u7684\u8bf7\u6c42</td>\n<td>bool</td>\n<td>true</td>\n</tr>\n<tr>\n<td>component</td>\n<td>\u8bf7\u6c42\u8fd4\u56de\u6210\u529f\u65f6\u9700\u8981\u6e32\u67d3\u7684\u7ec4\u4ef6</td>\n<td>jsx</td>\n<td>-</td>\n</tr>\n<tr>\n<td>render</td>\n<td>\u8bf7\u6c42\u8fd4\u56de\u6210\u529f\u65f6\u6267\u884c\u7684\u65b9\u6cd5\uff0c\u6539\u65b9\u6cd5\u9700\u8981\u8fd4\u56dejsx\uff0c\u53c2\u6570\u53ef\u4ee5\u62ff\u5230{data,refresh,setData}\uff0c\u5f53\u5b58\u5728component\u65f6\u6539\u65b9\u6cd5\u4e0d\u4f1a\u88ab\u6267\u884c</td>\n<td>function</td>\n<td>-</td>\n</tr>\n<tr>\n<td>loader</td>\n<td>\u5f53\u8be5\u53c2\u6570\u5b58\u5728\u65f6\uff0c\u7ec4\u4ef6\u4f1a\u4f18\u5148\u6267\u884cloader\u53bb\u83b7\u53d6\u6570\u636e\uff0c\u800c\u4e0d\u4f1a\u7528ajax\u53bb\u53d1\u9001\u8bf7\u6c42\uff0c\u6ce8\u610f\u5176\u8bf7\u6c42\u7684\u8fd4\u56de\u7ed3\u679c\u9875\u4e0d\u4f1atransformResponse\u8f6c\u6362\uff0c\u4e5f\u4e0d\u4f1a\u901a\u8fc7\u7ed3\u679c\u7684code\u53bb\u5224\u65ad\u8bf7\u6c42\u662f\u5426\u6210\u529f\uff0c\u5982\u679cloader\u8fd4\u56de\u7684Promise\u4e3aresolve\u5c31\u5224\u5b9a\u4e3a\u8bf7\u6c42\u6210\u529f\u3002\u5176\u8fd4\u56de\u6570\u636e\u4e5f\u4f1a\u539f\u6837\u4f20\u7ed9\u7ec4\u4ef6\u7684data\u4e0d\u4f1a\u518ddata.results\u53d6\u503c</td>\n<td>function</td>\n<td>-</td>\n</tr>\n<tr>\n<td>ajax</td>\n<td>\u901a\u5e38\u60c5\u51b5\u4e0b\u4f60\u4e0d\u9700\u8981\u4f20\u5165\u8fd9\u4e2a\u53c2\u6570,\u8be5\u53c2\u6570\u9ed8\u8ba4\u53d6preset\u4e2d\u7684ajax\u3002\u5f53\u4f60\u9700\u8981\u4e00\u4e2a\u5b8c\u5168\u4e0d\u540c\u4e8e\u5168\u5c40\u7684ajax\u53d1\u9001\u8bf7\u6c42\u7684\u65f6\u5019\u53ef\u4ee5\u901a\u8fc7\u8be5\u53c2\u6570\u4e3a\u6b64\u7ec4\u4ef6\u8bbe\u7f6e\u4e00\u4e2a\u65b0\u7684ajax\u5bf9\u8c61</td>\n<td>axios object</td>\n<td>-</td>\n</tr>\n<tr>\n<td>transformResponse</td>\n<td>\u901a\u5e38\u60c5\u51b5\u4e0b\u4f60\u4e0d\u9700\u8981\u4f20\u5165\u8fd9\u4e2a\u53c2\u6570,\u8be5\u53c2\u6570\u9ed8\u8ba4\u53d6preset\u4e2d\u7684transformResponse\u3002\u5f53\u4f60\u9700\u8981\u4e00\u4e2a\u5b8c\u5168\u4e0d\u540c\u4e8e\u5168\u5c40\u7684\u54cd\u5e94\u6570\u636e\u8f6c\u6362\u5668\u7684\u65f6\u5019\u53ef\u4ee5\u901a\u8fc7\u8be5\u53c2\u6570\u4e3a\u6b64\u7ec4\u4ef6\u8bbe\u7f6e</td>\n<td>function</td>\n<td>-</td>\n</tr>\n<tr>\n<td>transformData</td>\n<td>\u8f6c\u6362data\u8fd4\u56de\u503c\u51fd\u6570\uff0c\u5b83\u5728\u62ff\u5230transformResponse\u8fd4\u56de\u7ed3\u679c\u4e4b\u540e\u6267\u884c</td>\n<td>function</td>\n<td>-</td>\n</tr>\n</tbody>\n</table>\n<h4>withFetch</h4>\n<p>\u9ad8\u9636\u7ec4\u4ef6 Fetch\u7ec4\u4ef6\u7684\u5c01\u88c5 withFetch(WrappedComponent) WrappedComponent\u4e3a\u4e00\u4e2aReact Component,\u7b49\u4ef7\u4e8e\u7ed9Fetch\u4f20\u5165component\u53c2\u6570</p>\n<h4>createWithFetch</h4>\n<p>withFetch\u7684\u9ad8\u9636\u51fd\u6570\uff0c\u53ef\u4ee5\u5c06\u90e8\u5206\u53c2\u6570\u63d0\u524d\u4f20\u5165\uff0c\u4e0d\u5fc5\u5728\u8c03\u7528withFetch(WrappedComponent) \u65f6\u518d\u4f20\u5165\u53c2\u6570</p>\n<h4>useFetch</h4>\n<p>React Hooks</p>\n<p>\u53c2\u6570 useFetch(options)</p>\n<p>options:</p>\n<table>\n<thead>\n<tr>\n<th>\u5c5e\u6027\u540d</th>\n<th>\u8bf4\u660e</th>\n<th>\u7c7b\u578b</th>\n<th>\u9ed8\u8ba4\u503c</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>url</td>\n<td>\u9700\u8981\u8bf7\u6c42\u63a5\u53e3\u7684url</td>\n<td>string</td>\n<td>-</td>\n</tr>\n<tr>\n<td>data</td>\n<td>POST\u8bf7\u6c42\u7684data</td>\n<td>object</td>\n<td>-</td>\n</tr>\n<tr>\n<td>params</td>\n<td>GET\u8bf7\u6c42\u7684query</td>\n<td>object</td>\n<td>-</td>\n</tr>\n<tr>\n<td>options</td>\n<td>\u8bf7\u6c42\u7684\u5176\u4ed6\u53c2\u6570\uff0c\u5982method,headers\u7b49\uff0c\u8be6\u7ec6\u8bf7\u53c2\u8003<a href="https://github.com/axios/axios">axios</a></td>\n<td>object</td>\n<td>-</td>\n</tr>\n<tr>\n<td>auto</td>\n<td>\u662f\u5426\u81ea\u52a8\u53d1\u9001\u8bf7\u6c42\uff0c\u5982\u679c\u4e3afalse\u9700\u8981\u624b\u52a8\u8c03\u7528refresh\u65b9\u6cd5\u624d\u4f1a\u53d1\u9001\u8bf7\u6c42\uff0c\u5e76\u4e14url,data,options\u53d1\u751f\u53d8\u5316\u540e\u4e0d\u4f1a\u81ea\u52a8\u53d1\u9001\u65b0\u7684\u8bf7\u6c42</td>\n<td>boolean</td>\n<td>true</td>\n</tr>\n<tr>\n<td>debug</td>\n<td>\u662f\u5426\u5f00\u542f\u8c03\u8bd5\uff0c\u5f00\u542f\u4ee5\u540e\u53ef\u4ee5\u5728\u63a7\u5236\u53f0\u6253\u5370\u6574\u4e2a\u7ec4\u4ef6\u7684plugin\u6267\u884c\u5806\u6808\uff0c\u53ef\u4ee5\u5e2e\u52a9\u6392\u67e5\u95ee\u9898</td>\n<td>boolean</td>\n<td>false</td>\n</tr>\n<tr>\n<td>onRequestStart</td>\n<td>\u8bf7\u6c42\u5f00\u59cb\u65f6\u56de\u8c03\u65b9\u6cd5</td>\n<td>function</td>\n<td>-</td>\n</tr>\n<tr>\n<td>onRequestError</td>\n<td>\u8bf7\u6c42\u53d1\u751f\u9519\u8bef\u65f6\u56de\u8c03\u65b9\u6cd5</td>\n<td>function</td>\n<td>-</td>\n</tr>\n<tr>\n<td>onRequestSuccess</td>\n<td>\u8bf7\u6c42\u6210\u529f\u65f6\u56de\u8c03\u65b9\u6cd5</td>\n<td>function</td>\n<td>-</td>\n</tr>\n<tr>\n<td>onRequestComplete</td>\n<td>\u8bf7\u6c42\u5b8c\u6210\u65f6\uff08\u5305\u62ec\u6210\u529f\u548c\u5931\u8d25\uff09\u7684\u56de\u8c03\u65b9\u6cd5</td>\n<td>function</td>\n<td>-</td>\n</tr>\n</tbody>\n</table>\n<p>\u8fd4\u56de\u503c</p>\n<table>\n<thead>\n<tr>\n<th>\u5c5e\u6027\u540d</th>\n<th>\u8bf4\u660e</th>\n<th>\u7c7b\u578b</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>isLoading</td>\n<td>\u5f53\u524dfetch\u7ec4\u4ef6\u662f\u5426\u6b63\u5728\u52a0\u8f7d</td>\n<td>boolean</td>\n</tr>\n<tr>\n<td>isComplete</td>\n<td>\u5f53\u524dfetch\u7ec4\u4ef6\u662f\u5426\u5df2\u5b8c\u6210</td>\n<td>boolean</td>\n</tr>\n<tr>\n<td>error</td>\n<td>\u5f53\u524d\u7ec4\u4ef6\u7684\u8bf7\u6c42\u9519\u8bef\u4fe1\u606f</td>\n<td>boolean</td>\n</tr>\n<tr>\n<td>data</td>\n<td>\u5f53\u524d\u7ec4\u4ef6\u7684\u8bf7\u6c42\u8fd4\u56de\u6570\u636e</td>\n<td>-</td>\n</tr>\n<tr>\n<td>refresh</td>\n<td>\u53ef\u4ee5\u8c03\u7528\u5b83\u624b\u52a8\u91cd\u65b0\u53d1\u9001\u8bf7\u6c42\u7684\u65b9\u6cd5</td>\n<td>function</td>\n</tr>\n<tr>\n<td>reload</td>\n<td>\u53ef\u4ee5\u8c03\u7528\u5b83\u624b\u52a8\u91cd\u65b0\u53d1\u9001\u8bf7\u6c42\u7684\u65b9\u6cd5\u548crefresh\u7684\u5dee\u5f02\u5728\u4e8e\uff0creload\u5728\u8bf7\u6c42\u54cd\u5e94\u8fd4\u56de\u4e4b\u524d\u4e0d\u4f1a\u5199\u5728\u6389\u5f53\u524d\u9875\u9762\uff0c\u5f53\u8bf7\u6c42\u54cd\u5e94\u8fd4\u56de\u540e\u5bf9\u5185\u5c42\u7ec4\u4ef6\u505a\u6570\u636e\u66f4\u65b0\u64cd\u4f5c\uff0crefresh\u5219\u4f1a\u5728\u8bf7\u6c42\u53d1\u9001\u540e\u5207\u6362\u5230loading\u72b6\u6001\uff0c\u8bf7\u6c42\u54cd\u5e94\u8fd4\u56de\u540e\u5185\u5c42\u7ec4\u4ef6\u8d70\u91cd\u65b0install\u64cd\u4f5c</td>\n<td>func</td>\n</tr>\n<tr>\n<td>setData</td>\n<td>\u53ef\u4ee5\u8c03\u7528\u5b83\u7ed9fetch\u4e2d\u4fdd\u5b58\u503c\u7684state\u8d4b\u503c</td>\n<td>function</td>\n</tr>\n<tr>\n<td>requestParams</td>\n<td>\u5f53\u524d\u8bf7\u6c42\u7684\u5b9e\u9645\u53c2\u6570</td>\n<td>object</td>\n</tr>\n<tr>\n<td>fetchProps</td>\n<td>Fetch\u7ec4\u4ef6\u63a5\u53d7\u5230\u7684\u8bf7\u6c42\u53c2\u6570,\u5b83\u548crequestParams\u7684\u533a\u522b\u5728\u4e8e\uff0c\u53ea\u6709\u5f53Fetch\u7684\u53c2\u6570\u53d1\u751f\u4fee\u6539fetchProps\u7684\u503c\u4f1a\u4fee\u6539\uff0c\u901a\u8fc7send\uff0creload,refresh\u4fee\u6539\u8bf7\u6c42\u53c2\u6570\uff0cfetchProps\u7684\u503c\u4e0d\u4f1a\u4fee\u6539\uff0crequestParams\u5374\u59cb\u7ec8\u65f6\u5b9e\u9645\u53d1\u9001\u8bf7\u6c42\u7684\u53c2\u6570</td>\n<td>object</td>\n</tr>\n</tbody>\n</table>\n<h4>preset \u9884\u5236\u8bbe\u7f6e\u7684\u65b9\u6cd5 preset(options)</h4>\n<p>options</p>\n<table>\n<thead>\n<tr>\n<th>\u5c5e\u6027\u540d</th>\n<th>\u8bf4\u660e</th>\n<th>\u7c7b\u578b</th>\n<th>\u9ed8\u8ba4\u503c</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>ajax</td>\n<td>axios\u5b9e\u4f8b</td>\n<td>object</td>\n<td>-</td>\n</tr>\n<tr>\n<td>loading</td>\n<td>\u5728\u8bf7\u6c42\u53d1\u51fa\u540e\u6ca1\u6709\u8fd4\u56de\u7ed3\u679c\u65f6\u6e32\u67d3\u7684\u7ec4\u4ef6</td>\n<td>jsx</td>\n<td>null</td>\n</tr>\n<tr>\n<td>error</td>\n<td>\u8bf7\u6c42\u8fd4\u56de\u540ecode\u4e0d\u4e3a200\u65f6\u6e32\u67d3\u7684\u7ec4\u4ef6\uff0c\u5982\u679c\u4f20\u5165\u51fd\u6570\uff0c\u53c2\u6570\u4e2d\u4f1a\u63a5\u6536\u5230\u8bf7\u6c42\u8fd4\u56de\u7684\u9519\u8befmsg</td>\n<td>jsx|function</td>\n<td>null</td>\n</tr>\n<tr>\n<td>empty</td>\n<td>\u8bf7\u6c42\u672a\u53d1\u51fa\u65f6\u6e32\u67d3\u7684\u7ec4\u4ef6</td>\n<td>jsx</td>\n<td>null</td>\n</tr>\n<tr>\n<td>transformResponse</td>\n<td>\u8bf7\u6c42\u8f6c\u6362\u5668\uff0c\u53c2\u6570\u4e3aresponse\u8fd4\u56de\u503c\u4e3aresponse\u9700\u8981\u5728\u6b64\u65b9\u6cd5\u5c06\u8bf7\u6c42\u8fd4\u56de\u7ed3\u679c\u8f6c\u6362\u6210\u89c4\u5b9a\u7684\u683c\u5f0f</td>\n<td>function</td>\n<td>-</td>\n</tr>\n</tbody>\n</table>\n<h4>\u7f13\u5b58\u63a5\u53e3\u7684\u5e94\u7528</h4>\n<p>Fetch options</p>\n<table>\n<thead>\n<tr>\n<th>\u5c5e\u6027\u540d</th>\n<th>\u8bf4\u660e</th>\n<th>\u7c7b\u578b</th>\n<th>\u9ed8\u8ba4\u503c</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>cache</td>\n<td>\u4e3atrue\u6216\u8005\u4e3a\u5b57\u7b26\u4e32\u7684\u65f6\u5019\u4e3a\u5f00\u542f\u7f13\u5b58\uff0c\u5982\u679c\u8bf7\u6c42\u53c2\u6570\u5b8c\u5168\u4e00\u81f4\u5219\u547d\u4e2d\u7f13\u5b58\u3002\u5982\u679ccache\u4e3a\u5b57\u7b26\u4e32\uff0c\u53ea\u6709cahce\u4e00\u81f4\u7684\u7ec4\u4ef6\u4e4b\u95f4\u4f1a\u547d\u4e2d\u7f13\u5b58</td>\n<td>boolean|string</td>\n<td>-</td>\n</tr>\n<tr>\n<td>ttl</td>\n<td>\u7f13\u5b58\u5931\u6548\u65f6\u95f4\uff0c\u4e3a0\u7684\u65f6\u5019\u4e0d\u5931\u6548\uff0c\u5355\u4f4d\u4e3a\u6beb\u79d2</td>\n<td>number</td>\n<td>0</td>\n</tr>\n<tr>\n<td>isLocal</td>\n<td>\u7f13\u5b58\u662f\u5426\u5b58\u50a8\u5230localStorge</td>\n<td>bool</td>\n<td>false</td>\n</tr>\n</tbody>\n</table>',example:{isFull:!1,className:"react_fetch_6e9ee",style:".react_fetch_6e9ee .ant-space-vertical {\n  width: 100%; }\n\n.react_fetch_6e9ee .load-container {\n  height: 300px;\n  overflow: auto; }\n\n.react_fetch_6e9ee .scroller-no-more {\n  text-align: center; }\n",list:[{title:"preset\u8bbe\u7f6e",description:"\u6ce8\u610f\uff1areact-fetch \u5185\u90e8\u5904\u7406\u8bf7\u6c42\u7684\u65f6\u5019\u53ea\u901a\u8fc7 code,msg,results\u6765\u4f5c\u4e3a\u5185\u90e8\u903b\u8f91\uff0ccode\u4e3a200\u5224\u5b9a\u4e3a\u8bf7\u6c42\u6210\u529f\uff0c\u4e0d\u4e3a200\u65f6\u5224\u5b9a\u4e3a\u9519\u8bef\uff0cmsg\u4f1a\u4f20\u5165\u5230error\u7ec4\u4ef6\uff0c\u62ff\u5230results\u540e\uff0c\u4f1a\u5c06results\u4f5c\u4e3a\u4e1a\u52a1\u7ec4\u4ef6\u7684data\u5c5e\u6027\n\u5982\u679c\u540e\u7aef\u7684\u8fd4\u56de\u4e0d\u6ee1\u8db3\u4e0a\u8bc9\u683c\u5f0f\uff0c\u9700\u8981\u5728preset\u7684transformResponse\u65b9\u6cd5\u505a\u8f6c\u6362\u9002\u914d\najax\u4e3a\u4e00\u4e2aaxios\u5b9e\u4f8b\uff0c\u6bcf\u4e2a\u5b9e\u4f8b\u7684\u62e6\u622a\u5668\u53ef\u80fd\u4e0d\u540c\uff0c\u9ed8\u8ba4\u4f1a\u5728\u5185\u90e8\u81ea\u52a8\u521b\u5efa\u4e00\u4e2aaxios\u5b9e\u4f8b\uff0c\u4f46\u662f\u6ca1\u6709\u4efb\u4f55\u62e6\u622a\u5668\uff0c\u5982\u679c\u60f3\u7ed9\u5176\u6dfb\u52a0\u62e6\u622a\u5668\uff0c\u53ef\u4ee5\u81ea\u884c\u521b\u5efaaxios\u5b9e\u4f8b\u901a\u8fc7preset\u8bbe\u7f6e\npreset \u53ef\u4ee5\u5355\u72ec\u653e\u4e00\u4e2a\u6587\u4ef6\u91cc\uff0c\u5728\u5165\u53e3\u6587\u4ef6\u9876\u90e8\u5f15\u5165\u3002\npreset\u5168\u5c40\u8bbe\u7f6e\u4e00\u6b21\u5373\u53ef\u3002",code:"const {preset} = ReactFetch;\nconst {Input,Spin,Empty,Result,Space} = antd;\n\nlet timeout = 1000;\n\npreset({\n    ajax: (config) => {\n        return new Promise((resolve) => {\n            setTimeout(() => {\n                if (config.url === '/data1') {\n                    console.log('data1 request');\n                    resolve({\n                        data: {\n                            code: 0,\n                            data: [\n                                {title: '\u6570\u636e\u4e00'},\n                                {title: '\u6570\u636e\u4e8c'}\n                            ]\n                        }\n                    });\n                    return;\n                }\n                if (config.url === '/data2') {\n                    resolve({\n                        data: {\n                            code: 0,\n                            data: {\n                                list: _.range(0, config.params.size || 10).map((index) => {\n                                    return {\n                                        title: config.params.page + '\u9875\uff0c\u6570\u636e' + (index + 1)\n                                    }\n                                }),\n                                total: 100\n                            }\n                        }\n                    });\n                    return;\n                }\n                return resolve({\n                    data: {\n                        code: 404,\n                        msg: '\u6ca1\u627e\u5230\u8d44\u6e90'\n                    }\n                });\n            }, timeout);\n        });\n    },\n    loading: <Spin>\u6570\u636e\u52a0\u8f7d\u4e2d...</Spin>,\n    empty: <Empty/>,\n    error: (msg) => <Result title={msg}/>,\n    transformResponse: (response) => {\n        const {data} = response;\n        response.data = {\n            code: data.code === 0 ? 200 : data.code, msg: data.msg, results: data.data\n        };\n        return response;\n    }\n});\n\nconst Preset = () => {\n    return <Space direction=\"vertical\">\n        <div>\u8be5\u7ec4\u4ef6\u53ea\u8bbe\u7f6e\u5176\u4ed6\u793a\u4f8b\u7684mock data\uff0c\u4e0d\u5c55\u793a\u4efb\u4f55\u529f\u80fd</div>\n        <div>\u8fd9\u91cc\u53ef\u4ee5\u8bbe\u7f6e\u6a21\u62df\u8bf7\u6c42\u5ef6\u8fdf\u65f6\u95f4</div>\n        <Input type=\"text\" defaultValue={timeout} onChange={(e) => {\n            timeout = parseInt(e.target.value);\n        }} addonAfter=\"ms\"/>\n    </Space>\n};\n\nrender(<Preset/>);\n\n",scope:[{name:"ReactFetch",packageName:"@kne/react-fetch",component:a},{name:"antd",packageName:"antd",component:d},{name:"_",packageName:"lodash",component:r}]},{title:"\u8bf7\u6c42\u6210\u529f",description:"\u53d1\u9001\u4e00\u4e2a\u6210\u529f\u8bf7\u6c42\uff0c\u5185\u90e8\u7ec4\u4ef6\u62ff\u5230\u6570\u636e\u5e76\u5c55\u793a\u6570\u636e",code:"const {createWithFetch} = ReactFetch;\nconst {List} = antd;\n\nconst Remote = createWithFetch({\n    url: '/data1'\n})(({data}) => {\n    return <List bordered>\n        {data.map((item, index) => {\n            return <List.Item key={index}>{item.title}</List.Item>\n        })}\n    </List>;\n});\n\nrender(<Remote/>);\n\n",scope:[{name:"ReactFetch",packageName:"@kne/react-fetch",component:a},{name:"antd",packageName:"antd",component:d}]},{title:"\u4f7f\u7528Fetch\u7ec4\u4ef6\u53d1\u9001\u8bf7\u6c42",description:"\u4f7f\u7528Fetch\u7ec4\u4ef6\u53d1\u9001\u4e00\u4e2a\u6210\u529f\u8bf7\u6c42\uff0c\u5185\u90e8\u7ec4\u4ef6\u62ff\u5230\u6570\u636e\u5e76\u5c55\u793a\u6570\u636e",code:"const {default: Fetch} = ReactFetch;\nconst {List} = AntdList;\n\nconst Remote = () => {\n    return <Fetch url=\"/data1\" loader={() => {\n        return new Promise((resolve) => {\n            resolve([{title:'loader\u6570\u636e'}]);\n        })\n    }} render={({data}) => {\n        return <List bordered>\n            {data.map((item, index) => {\n                return <List.Item key={index}>{item.title}</List.Item>\n            })}\n        </List>\n    }}/>\n};\n\nrender(<Remote/>);\n\n",scope:[{name:"ReactFetch",packageName:"@kne/react-fetch",component:a},{name:"antd",packageName:"antd",component:d}]},{title:"\u8bf7\u6c42\u5931\u8d25",description:"\u53d1\u9001\u4e00\u4e2a\u5931\u8d25\u8bf7\u6c42\uff0c\u5185\u90e8\u7ec4\u4ef6\u4e0d\u6e32\u67d3\uff0c\u76f4\u63a5\u5c55\u793a\u9519\u8bef\u4fe1\u606f",code:"const {createWithFetch} = ReactFetch;\n\nconst Error = createWithFetch({\n    url: '/error'\n})(() => {\n    return '\u8fd9\u662f\u4e00\u4e2a\u9519\u8bef\u8bf7\u6c42';\n});\n\nrender(<Error/>);\n\n",scope:[{name:"ReactFetch",packageName:"@kne/react-fetch",component:a}]},{title:"\u5206\u9875\u6570\u636e\u8bf7\u6c42",description:"\u5206\u9875\u52a0\u8f7d\u6570\u636e",code:"const {useState} = React;\nconst {createWithFetch} = ReactFetch;\nconst {Button,Pagination,Space,List} = antd;\n\nconst Page = createWithFetch({\n    url: '/data2',\n    params: {page: 1, size: 10}\n})(({data, requestParams, isRefresh, reload, refresh}) => {\n    return <Space direction=\"vertical\">\n        <List bordered>\n            {data.list.map((item, index) => {\n                return <List.Item key={index}>{item.title}</List.Item>\n            })}\n        </List>\n        <div>\n            <Pagination current={requestParams.params.page} total={data.total}\n                        pageSize={requestParams.params.size} onChange={(page, size) => {\n                (isRefresh ? refresh : reload)({params: {page, size}});\n            }}/>\n        </div>\n    </Space>;\n});\n\nconst Remote = () => {\n    const [isRefresh, setIsRefresh] = useState(false);\n    return <Space direction=\"vertical\">\n        <div>\n            <Button type=\"primary\" onClick={() => {\n                setIsRefresh((value) => !value);\n            }}>\u4ee5{isRefresh ? 'refresh' : 'reload'}\u65b9\u5f0f\u52a0\u8f7d\n            </Button>\n        </div>\n        <Page isRefresh={isRefresh}/>\n    </Space>\n};\n\nrender(<Remote/>);\n\n",scope:[{name:"ReactFetch",packageName:"@kne/react-fetch",component:a},{name:"antd",packageName:"antd",component:d},{name:"_",packageName:"lodash",component:r}]},{title:"\u4e0b\u62c9\u52a0\u8f7d\u66f4\u591a",description:"\u4e0b\u62c9\u52a0\u8f7d\u66f4\u591a\u6570\u636e",code:"const {useEffect, forwardRef, useRef, useImperativeHandle} = React;\nconst {createWithFetch} = ReactFetch;\nconst {Space,List,Spin} = antd;\nconst {throttle} = _;\n\nconst ScrollLoader = forwardRef(({\n                                     className,\n                                     noMore,\n                                     getScrollContainer,\n                                     onLoader,\n                                     isLoading,\n                                     completeTips,\n                                     children\n                                 }, ref) => {\n    const scrollerRef = useRef();\n    const onLoaderHandlerRef = useRef(onLoader);\n    onLoaderHandlerRef.current = onLoader;\n    const canLoadRef = useRef(!noMore && !isLoading);\n    canLoadRef.current = !noMore && !isLoading;\n    useImperativeHandle(ref, () => {\n        return scrollerRef.current;\n    }, []);\n    useEffect(() => {\n        if (canLoadRef.current && scrollerRef.current.clientHeight === scrollerRef.current.scrollHeight) {\n            onLoaderHandlerRef.current();\n        }\n    }, [isLoading]);\n    useEffect(() => {\n        const el = scrollerRef.current;\n        const scrollHandler = throttle((e) => {\n            const el = e.target;\n            if (canLoadRef.current && el.clientHeight + el.scrollTop + 20 > el.scrollHeight) {\n                onLoaderHandlerRef.current();\n            }\n        }, 100);\n        el.addEventListener('scroll', scrollHandler, true);\n        return () => {\n            el.removeEventListener('scroll', scrollHandler, true);\n        };\n    }, []);\n    return <div ref={scrollerRef} className=\"load-container\">\n        <Space direction='vertical'>\n            <div>{children}</div>\n            {isLoading ? <div className='scroller-no-more'><Spin/></div> : null}\n            {noMore ? <div className='scroller-no-more'>{completeTips}</div> : null}\n        </Space>\n    </div>;\n});\n\nconst Remote = createWithFetch({\n    url: '/data2',\n    params: {page: 1, size: 10}\n})(({data, isComplete, requestParams, loadMore}) => {\n    return <ScrollLoader isLoading={!isComplete}\n                         noMore={isComplete && requestParams.params.page >= Math.ceil(data.total / requestParams.params.size)}\n                         onLoader={() => {\n                             return loadMore({\n                                 params: {page: requestParams.params.page + 1}\n                             }, (data, newData) => {\n                                 return Object.assign({}, newData, {\n                                     list: data.list.concat(newData.list)\n                                 });\n                             });\n                         }} completeTips=\"\u52a0\u8f7d\u5b8c\u6210\">\n        <List bordered>\n            {data.list.map((item, index) => {\n                return <List.Item key={index}>{item.title}</List.Item>\n            })}\n        </List>\n    </ScrollLoader>;\n});\n\n\nrender(<Remote/>);\n\n",scope:[{name:"ReactFetch",packageName:"@kne/react-fetch",component:a},{name:"antd",packageName:"antd",component:d},{name:"_",packageName:"lodash",component:r}]},{title:"\u7a7a\u6570\u636e",description:"\u7528isEmpty\u5224\u65ad\u6570\u636e\u662f\u4e0d\u662f\u7a7a\u72b6\u6001",code:"const {createWithFetch} = ReactFetch;\nconst {List} = antd;\n\nconst Remote = createWithFetch({\n    url: '/data1',\n    isEmpty: () => true\n})(({data}) => {\n    return <List bordered>\n        {data.map((item, index) => {\n            return <List.Item key={index}>{item.title}</List.Item>\n        })}\n    </List>;\n});\n\nrender(<Remote/>);\n\n",scope:[{name:"ReactFetch",packageName:"@kne/react-fetch",component:a},{name:"antd",packageName:"antd",component:d}]},{title:"\u7528loader\u52a0\u8f7d\u6570\u636e",description:"\u5c55\u793a\u4e86\u7528loader\u6765\u52a0\u8f7d\u6570\u636e\u7684\u4f8b\u5b50",code:"const {createWithFetch} = ReactFetch;\n\n\nconst Example = createWithFetch({\n    loader: async (data) => {\n        return await new Promise((resolve, reject) => {\n            setTimeout(() => {\n                resolve(Object.assign({}, data, {message: '\u8bf7\u6c42\u6210\u529f'}));\n            }, 1000);\n        });\n    }\n})(({data,requestParams}) => {\n    console.log(requestParams);\n    return JSON.stringify(data, null, 2);\n});\n\nrender(<Example data={{name: 'jack'}}/>);\n\n",scope:[{name:"ReactFetch",packageName:"@kne/react-fetch",component:a}]},{title:"transform",description:"\u5c55\u793atransformResponse\u7684\u8c03\u7528",code:"const {createWithFetch} = ReactFetch;\nconst {default: List} = AntdList;\n\nconst Remote = createWithFetch({\n    url: '/data1',\n    transformResponse: (response) => {\n        console.log(response);\n        return {\n            data:{\n                code: 200, results: [\n                    {title: '\u6211\u662fresponse\u88ab\u62e6\u622a\u4ee5\u540e\u7684\u5185\u5bb9'}\n                ]\n            }\n        };\n    }\n})(({data}) => {\n    return <List bordered>\n        {data.map((item, index) => {\n            return <List.Item key={index}>{item.title}</List.Item>\n        })}\n    </List>;\n});\n\nrender(<Remote/>);\n\n",scope:[{name:"ReactFetch",packageName:"@kne/react-fetch",component:a},{name:"antd",packageName:"antd",component:d}]},{title:"\u7f13\u5b58\u64cd\u4f5c",description:"\u5c55\u793a\u7f13\u5b58\u64cd\u4f5c",code:"const {createWithFetch, getCache} = ReactFetch;\nconst {List,Space,Button} = antd;\n\nconst {useRef} = React;\n\nconst Remote = createWithFetch({\n    url: '/data1',\n    cache: 'cache'\n})(({data}) => {\n    return <List bordered>\n        {data.map((item, index) => {\n            return <List.Item key={index}>{item.title}</List.Item>\n        })}\n    </List>;\n});\n\nconst cache = getCache();\n\nconst Example = () => {\n    const ref = useRef();\n    return <Space direction=\"vertical\">\n        <Remote ref={ref}/>\n        <Space>\n            <Button onClick={() => {\n                ref.current.reload({}, false);\n            }}>\u83b7\u53d6\u6570\u636e</Button>\n            <Button onClick={() => {\n                cache.delByCacheName('cache');\n            }}>\u6e05\u9664\u7f13\u5b58</Button>\n        </Space>\n    </Space>;\n};\n\nrender(<Example/>);\n\n",scope:[{name:"ReactFetch",packageName:"@kne/react-fetch",component:a},{name:"antd",packageName:"antd",component:d}]}]}}}}]);
//# sourceMappingURL=88.7476ecb5.chunk.js.map